<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Installation_Guide.ent">
%BOOK_ENTITIES;
]>
<chapter id="chap-Installation_Guide-system-requirements">
    <title>&OVIRT;系统需求</title>
    <section id="sect-Installation_Guide-system-requirements_Section_1">
        <title>系统需求之流程图解</title>
        <informalfigure>
            <mediaobject>
                <imageobject>
                    <imagedata
                        fileref="images/eayun_installation_checklist.png"
                        format="PNG" />
                </imageobject>
            </mediaobject>
        </informalfigure>
    </section>

    <section id="sect-Installation_Guide-system-requirements_Section_2">
        <title>硬件需求</title>
        <section id="sect-Installation_Guide-system-requirements_Section_2-1">
            <title>&OVIRT;硬件需求概览</title>
            <para>
                部署&OVIRT;虚拟化环境，最少应该满足以下设备要求：
                <itemizedlist>
                    <listitem>
                        <para>
                            1台&OVIRT;&MANAGER;服务器，
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            1台及以上的&OVIRT;&NODE;服务器（为了支持虚拟机迁移
                            以及电源管理，则最少应该准备2台&OVIRT;&NODE;
                            服务器），
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            1台及以上用于访问管理门户的客户端设备，
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            存储设备（NFS、POSIX文件系统、iSCSI存储、SAN存储或
                            者服务器本地存储设备）。
                        </para>
                    </listitem>
                </itemizedlist>
            </para>

            <para>
                上述几种类型的硬件需求在后面的章节中会详细说明。
            </para>

            <formalpara>
                <title>参见：</title>
                <para>
                    <itemizedlist>
                        <listitem>
                            <simpara><link linkend=
                                    "sect-Installation_Guide-system-requirements_Section_2-2-2">
                                    2.2.2 &OVIRT;&MANAGER;的硬件需求
                            </link></simpara>
                        </listitem>

                        <listitem>
                            <simpara><link linkend=
                                    "sect-Installation_Guide-system-requirements_Section_2-2-3">
                                    2.2.3 &OVIRT;&NODE;的硬件需求
                            </link></simpara>
                        </listitem>
                    </itemizedlist>
                </para>
            </formalpara>
        </section>

        <section id="sect-Installation_Guide-system-requirements_Section_2-2-2">
            <title>&OVIRT;&MANAGER;的硬件需求</title>
            <para>
                这里提供的最小和推荐硬件需求均针对典型部署方案而言，实际部署时请根据
                系统规模和负载情况考虑硬件配置。
            </para>

            <formalpara>
                <title>最小硬件需求</title>
                <para><itemizedlist>
                        <listitem>
                            <para>1颗双核CPU。</para>
                        </listitem>
                        <listitem>
                            <para>系统（部署&OVIRT;&MANAGER;之前）正常运行时可以保留4G空
                                闲内存。
                            </para>
                        </listitem>
                        <listitem>
                            <para>25G空闲磁盘空间。</para>
                        </listitem>
                        <listitem>
                            <para>1块千兆（或者更高速率）网卡。</para>
                        </listitem>
                </itemizedlist></para>
            </formalpara>

            <formalpara>
                <title>建议硬件需求</title>
                <para><itemizedlist>
                        <listitem>
                            <para>1颗及以上双核CPU。</para>
                        </listitem>
                        <listitem>
                            <para>16G内存。</para>
                        </listitem>
                        <listitem>
                            <para>50G本地空闲磁盘空间。</para>
                        </listitem>
                        <listitem>
                            <para>1块千兆（或者更高速率）网卡。</para>
                        </listitem>
                </itemizedlist></para>
            </formalpara>
        </section>

        <section id="sect-Installation_Guide-system-requirements_Section_2-2-3">
            <title>&OVIRT;&NODE;的硬件需求</title>

            <section id="sect-Installation_Guide-system-requirements_Section_2-2-3-1">
                <title>&OVIRT;&NODE;的硬件需求概览</title>
                <para>
                    &OVIRT;&NODE;的硬件需求分章节介绍如下：

                    <itemizedlist>
                        <listitem>
                            <simpara><link linkend=
                                    "sect-Installation_Guide-system-requirements_Section_2-2-3-2">
                                    2.2.3.2 &OVIRT;&NODE;对于CPU的要求
                            </link></simpara>
                        </listitem>

                        <listitem>
                            <simpara><link linkend=
                                    "sect-Installation_Guide-system-requirements_Section_2-2-3-3">
                                    2.2.3.3 &OVIRT;&NODE;对于系统内存的要求
                            </link></simpara>
                        </listitem>

                        <listitem>
                            <simpara><link linkend=
                                    "sect-Installation_Guide-system-requirements_Section_2-2-3-4">
                                    2.2.3.4 &OVIRT;&NODE;对于存储空间的要求
                            </link></simpara>
                        </listitem>

                        <listitem>
                            <simpara><link linkend=
                                    "sect-Installation_Guide-system-requirements_Section_2-2-3-5">
                                    2.2.3.5 &OVIRT;&NODE;对于PCI设备的要求
                            </link></simpara>
                        </listitem>
                    </itemizedlist>
                </para>
            </section>

            <section id="sect-Installation_Guide-system-requirements_Section_2-2-3-2">
                <title>&OVIRT;&NODE;对于CPU的要求</title>

                <para>
                    &OVIRT;&NODE;支持以下型号的CPU：

                    <itemizedlist>
                        <listitem>
                            <simpara>AMD Operton G1</simpara>
                        </listitem>
                        <listitem>
                            <simpara>AMD Operton G2</simpara>
                        </listitem>
                        <listitem>
                            <simpara>AMD Operton G3</simpara>
                        </listitem>
                        <listitem>
                            <simpara>AMD Operton G4</simpara>
                        </listitem>
                        <listitem>
                            <simpara>AMD Operton G5</simpara>
                        </listitem>
                        <listitem>
                            <simpara>Intel Conroe</simpara>
                        </listitem>
                        <listitem>
                            <simpara>Intel Penryn</simpara>
                        </listitem>
                        <listitem>
                            <simpara>Intel Nehalem</simpara>
                        </listitem>
                        <listitem>
                            <simpara>Intel Westmere</simpara>
                        </listitem>
                        <listitem>
                            <simpara>Intel Sandybridge</simpara>
                        </listitem>
                        <listitem>
                            <simpara>Intel Haswell</simpara>
                        </listitem>
                    </itemizedlist>
                </para>

                <para>
                    CPU必须支持64位技术（Intel&reg; 64 or AMD64），支持
                    AMD-V&trade;或者Intel VT&reg;虚拟化技术。另外CPU也必须支持
                    NX技术（No eXecute）。部署之前需要检查CPU是否满足上述要求：
                    <itemizedlist>
                        <listitem>
                            <para>
                                使用&OVIRT;&NODE;安装光盘引导服务器，进入救援模
                                式（rescue）；
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                出现提示符，执行下面的命令：
                                <screen># grep -E 'svm|vmx' /proc/cpuinfo | grep nx
                                </screen>
                                如果有输出，说明CPU支持虚拟化技术。某些服务器的
                                BIOS中提供了禁用虚拟化技术的选项，需要根据硬件手
                                册确认或者咨询生产厂商。
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                检查内核模块kvm有没有加载：
                                <screen># lsmod | grep kvm
                                </screen>
                                如果输入中包含kvm_intel或者kvm_amd说明模块已经正
                                确加载，CPU满足虚拟化技术的要求。
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
            </section>

            <section id="sect-Installation_Guide-system-requirements_Section_2-2-3-3">
                <title>&OVIRT;&NODE;对于系统内存的要求</title>
                <para>
                    建议&OVIRT;&NODE;服务器配置2G以上的内存。以下因素对实际内存
                    的需求产生影响：
                    <itemizedlist>
                        <listitem>
                            <simpara>虚拟机操作系统对内存的使用；
                            </simpara>
                        </listitem>
                        <listitem>
                            <simpara>虚拟机中运行的应用程序对内存的使用；
                            </simpara>
                        </listitem>
                        <listitem>
                            <simpara>虚拟机本身对内存的使用。
                            </simpara>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    KVM使用了内存over-commit技术改善了对虚拟机内存申请的管理，允
                    许在所有虚拟机不是都处于高负载的情况下满足一些虚拟机申请超过
                    物理限制数量的内存。
                </para>
                <para>
                    目前&OVIRT;&NODE;支持最大2T内存。
                </para>
            </section>

            <section id="sect-Installation_Guide-system-requirements_Section_2-2-3-4">
                <title>&OVIRT;&NODE;对于存储空间的要求</title>
                <para>
                    建议&OVIRT;&NODE;至少应该配置2G存储空间，包括：
                    <itemizedlist>
                        <listitem>
                            <simpara>根分区至少需要500M；
                            </simpara>
                        </listitem>
                        <listitem>
                            <simpara>配置文件分区至少需要8M；
                            </simpara>
                        </listitem>
                        <listitem>
                            <simpara>日志分区建议至少使用2048M；
                            </simpara>
                        </listitem>
                        <listitem>
                            <para>数据分区至少使用256M。数据分区过小会导致后期无
                                法进行扩展或者更新。默认情况下，其他分区划分完成
                                之后，所有空闲的存储空间都会分配给数据分区。
                            </para>
                        </listitem>
                        <listitem>
                            <para>swap分区至少需要8M。swap分区的推荐大小由服务器
                                的配置，以及内存overcommit的配置决定。&OVIRT;&NODE;
                                中内存overcommit默认的比例为0.5。可以通过下面的
                                公式确定swap分区的大小：
                                <itemizedlist>
                                    <listitem>
                                        <simpara>
                                            将物理内存总量乘以overcommit比例，加上
                                        </simpara>
                                    </listitem>
                                    <listitem>
                                        <simpara>
                                            2G（如果系统内存小于等于4G），或者
                                        </simpara>
                                    </listitem>
                                    <listitem>
                                        <simpara>
                                            4G（如果系统内存大于4G小于16G），或者
                                        </simpara>
                                    </listitem>
                                    <listitem>
                                        <simpara>
                                            8G（如果系统内存大于16G小于64G），或者
                                        </simpara>
                                    </listitem>
                                    <listitem>
                                        <simpara>
                                            16G（如果系统内存大于64G小于256G），或者
                                        </simpara>
                                    </listitem>
                                </itemizedlist>
                                <example>
                                    <title>计算swap分区大小</title>
                                    <para>对于配置了8G物理内存的服务器来
                                        说，使用上面的说明可以计算得出：
                                        <screen>(8 GB x 0.5) + 4 GB = 8 GB
                                        </screen>
                                    </para>
                                </example>
                                <important>
                                    <para>&OVIRT;&NODE;安装时会自动使用上述公式
                                        计算swap分区大小，内存overcommit比例为
                                        0.5。某些情况下，计算得出的swap分区大小
                                        超过了本地磁盘的剩余空间，导致&OVIRT;&NODE;
                                        安装失败。此时可以通过storage_vol引导参
                                        数手动设置分区大小。
                                        <example>
                                            <title>手动设置swap分区大小</title>
                                            <para>下面的示例，只设置swap分区大小
                                                为4096M，没有设置其他分区的大
                                                小，由安装程序自行确定。
                                                <screen>storage_vol=:4096::::
                                                </screen>
                                            </para>
                                        </example>
                                    </para>
                                </important>
                                <important>
                                    <para>&OVIRT;&NODE;不支持安装在fakeraid设备
                                        上。使用fakeraid设备时必须重新配置为
                                        non-RAID的模式。
                                        <orderedlist>
                                            <listitem><simpara>
                                                    进入RAID控制器的BIOS，删除所
                                                    有LUN。
                                            </simpara></listitem>
                                            <listitem><simpara>
                                                    将控制器设置为non-RAID模式
                                                    （“compatibility”或者“JBOD”
                                                    选项，具体需要资源硬件厂商）。
                                            </simpara></listitem>
                                        </orderedlist>
                                        具体的配置方法和说明请咨询硬件厂商。
                                    </para>
                                </important>
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
            </section>

            <section id="sect-Installation_Guide-system-requirements_Section_2-2-3-5">
                <title>&OVIRT;&NODE;对于PCI设备的要求</title>
                <para>
                    &OVIRT;&NODE;至少应该配置1块千兆（或者更高速率）网卡，建议配
                    置2块网卡以支持对网络要求较高的任务，如虚拟机迁移等。
                </para>
            </section>
        </section>
    </section>

    <section id="sect-Installation_Guide-system-requirements_Section_3">
        <title>软件需求</title>
        <section>
            <title>&OVIRT;&MANAGER;客户端的软件要求</title>
            <para>
                客户端通过web浏览器访问管理门户和普通用户门户。不同的操作系统平
                台上对web浏览器有不同的要求：
                <itemizedlist>
                    <listitem>
                        <para>
                            在Red Hat企业Linux上，使用Mozilla Firefox 17或者更新
                            版本可以访问2种门户；
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            在微软Windows上，使用IE 8或者更新版本可以访问普通用
                            户门户（只支持桌面版IE，不可使用触屏版的IE 10）。
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            在微软Windows上，使用IE 9或者更新版本可以访问管理门
                            户（只支持桌面版IE，不可使用触屏版的IE 10）。
                        </para>
                    </listitem>
                </itemizedlist>
            </para>

            <para>
                使用虚拟机控制台，需要安装SPICE客户端。支持安装SPICE客户端的系统
                有：
                <itemizedlist>
                    <listitem>
                        <simpara>Red Hat企业Linux 5.8+（i386、amd64、Intel64）
                        </simpara>
                    </listitem>
                    <listitem>
                        <simpara>Windows XP
                        </simpara>
                    </listitem>
                    <listitem>
                        <simpara>Windows XP Embedded (XPe)
                        </simpara>
                    </listitem>
                    <listitem>
                        <simpara>Windows 7 (x86, AMD64 and Intel 64)
                        </simpara>
                    </listitem>
                    <listitem>
                        <simpara>Windows 8 (x86, AMD64 and Intel 64)
                        </simpara>
                    </listitem>
                    <listitem>
                        <simpara>Windows Embedded Standard 7
                        </simpara>
                    </listitem>
                    <listitem>
                        <simpara>Windows 2008/R2 (x86, AMD64 and Intel 64)
                        </simpara>
                    </listitem>
                    <listitem>
                        <simpara>Windows Embedded Standard 2009
                        </simpara>
                    </listitem>
                </itemizedlist>
            </para>

            <para>Mozilla Firefox使用的SPICE客户端，需要通过yum安装spice-xpi。
            </para>

            <para>使用IE访问2种门户时，SPICE ActiveX插件会自动下载安装。
            </para>
        </section>

        <section>
            <title>目录服务</title>
            <section>
                <title>目录服务简介</title>
                <para>
                    目录服务是指提供储存企业和用户信息数据，并提供给用户的软硬件
                    和处理流程的集合。一个目录服务至少包含一个目录服务器和一个目
                    录客户端。客户端可以访问目录服务中储存的各种数据信息，如姓名、
                    电话号码等。
                </para>
                <formalpara>
                    <title>参见</title>
                    <para><link linkend=
                            "sect-Installation_Guide-system-requirements_Section_2-3-2-2">
                            2.3.2.2 &OVIRT;虚拟化环境对目录服务的支持
                    </link></para>
                </formalpara>
            </section>

            <section id="sect-Installation_Guide-system-requirements_Section_2-3-2-2">
                <title>&OVIRT;虚拟化环境对目录服务的支持</title>
                <para>安装&OVIRT;&NODE;时自动建立了一个管理用户admin，该用户只用
                    于整个虚拟化环境的初始配置和故障处理。要增加其他用户，必须通
                    过engine-manage-domains工具连接到一个目录服务。
                </para>
                <para>当&OVIRT;&MANAGER;连接到至少一个目录服务之后，才可以通过管
                    理门户添加目录服务中已有的用户，并为新增的用户赋予不同的角色
                    和权限。用户通过user@domain这种格式的UPN（User Principal Name）
                    进行唯一标识。&OVIRT;&MANAGER;支持同时连接到多个目录服务。
                </para>
                <para>目前&OVIRT;&MANAGER;支持的目录服务器有：
                    <itemizedlist>
                        <listitem><simpara>
                                Active Directory
                        </simpara></listitem>
                        <listitem><simpara>
                                Identity Management (IdM)
                        </simpara></listitem>
                        <listitem><simpara>
                                Red Hat Directory Server 9 (RHDS 9)
                        </simpara></listitem>
                        <listitem><simpara>
                                OpenLDAP
                        </simpara></listitem>
                    </itemizedlist>
                </para>
                <para>目录服务器必须有正确的DNS记录，包括：
                    <itemizedlist>
                        <listitem><simpara>
                                目录服务器的PTR记录
                        </simpara></listitem>
                        <listitem><simpara>
                                LDAP TCP 389端口的SRV记录
                        </simpara></listitem>
                        <listitem><simpara>
                                Kerberos TCP 88端口的SRV记录
                        </simpara></listitem>
                        <listitem><simpara>
                                Kerberos UDP 88端口的SRV记录
                        </simpara></listitem>
                    </itemizedlist>
                </para>
                <para>如果&OVIRT;&MANAGER;无法解析上述DNS记录，engine-manage-domains
                    无法添加目录服务。
                </para>
                <para>关于各目录服务器的详细文档，请查阅厂商或者社区网站：
                    <itemizedlist>
                        <listitem><simpara>
                                Active Directory -
                                <ulink url="
                                    http://technet.microsoft.com/en-us/windowsserver/dd448614"
                                    />
                        </simpara></listitem>
                        <listitem><simpara>
                                Identity Management (IdM) -
                                <ulink url="
                                    http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Identity_Management_Guide/index.html"
                                    />
                        </simpara></listitem>
                        <listitem><simpara>
                                Red Hat Directory Server 9 (RHDS 9) -
                                <ulink url="
                                    http://docs.redhat.com/docs/en-US/Red_Hat_Directory_Server/index.html"
                                    />
                        </simpara></listitem>
                        <listitem><simpara>
                                LDAP -
                                <ulink url="
                                    http://www.openldap.org/doc/"
                                    />
                        </simpara></listitem>
                    </itemizedlist>
                </para>
                <important>
                    <para>在目录服务中必须建立一个用户作为&OVIRT;&MANAGER;的管理
                        员用户，不要直接使用目录服务的管理员用户作为&OVIRT;&MANAGER;
                        的管理员。
                    </para>
                </important>
                <important>
                    <para>IdM（ipa-server）无法和&OVIRT;&MANAGER;安装在同一台服
                        务器上，因为IdM和mod_ssl不兼容，但是该软件包是安装
                        &OVIRT;&MANAGER;必需的。
                    </para>
                </important>
                <important>
                    <para>如果使用Active Directory作为目录服务，而且在建立模板和
                        虚拟机时需要使用sysprep，那么&OVIRT;&MANAGER;的管理员用
                        户必须用户AD域的以下权限：
                        <itemizedlist>
                            <listitem><simpara>
                                    Join a computer to the domain
                            </simpara></listitem>
                            <listitem><simpara>
                                    Modify the m em bership of a group
                            </simpara></listitem>
                        </itemizedlist>
                        关于Active Direcotry建立用户和赋予权限的详细说明参见：
                        <itemizedlist>
                            <listitem><simpara>
                                    <ulink url="
                                        http://technet.microsoft.com/en-us/library/cc732336.aspx"
                                        />
                            </simpara></listitem>
                            <listitem><simpara>
                                    <ulink url="
                                        http://technet.microsoft.com/en-us/library/cc732524.aspx"
                                        />
                            </simpara></listitem>
                        </itemizedlist>
                    </para>
                </important>
                <note>
                    <para>&OVIRT;&MANAGER;访问目录服务时使用Kerberos验证。RHDS不
                        能直接支持Kerberos。使用RHDS时需要保证它作为一个可用的
                        Kerberos域中目录服务，通过以下步骤可以实现这一部署方案，
                        详细说明请查阅厂商文档：
                        <itemizedlist>
                            <listitem><para>
                                    配置RHDS的memberOf插件以支持用户分组。
                            </para></listitem>
                            <listitem><para>
                                    将目录服务配置为Kerberos realm中一个服务，服
                                    务名称的格式为ldap/hostname@REALNAME，其中
                                    hostname是目录服务器的完整域名，REALNAME是
                                    Kerberos realm的完整名称。
                            </para></listitem>
                            <listitem><para>
                                    在Kerberos realm中为目录服务生成一个keytab文
                                    件。
                            </para></listitem>
                            <listitem><para>
                                    在目录服务器上安装keytab文件，并配置RHDS使用
                                    keytab文件而且接受使用GSSAPI进行Kerberos验证。
                            </para></listitem>
                            <listitem><para>
                                    在目录服务器上使用kinit测试用户验证是否可以
                                    通过。验证通过之后，使用ldapsearch加上 -Y GSSAPI
                                    参数测试是否可以正常查询目录服务。
                            </para></listitem>
                        </itemizedlist>
                    </para>
                </note>
                <formalpara>
                    <title>参见：</title>
                    <para><itemizedlist>
                            <listitem><simpara>
                                    <link linkend="
                                        sect-Installation_Guide-appendix-additional-utilites_Chapter_Section_1"> 
                                        附录 B.1 目录服务管理
                                    </link>
                            </simpara></listitem>
                            <listitem><simpara>
                                    <link linkend="
                                        sect-Installation_Guide-system-requirements_Section_2-3-3-3">
                                        2.3.3.3 目录服务的防火墙配置
                                    </link>
                            </simpara></listitem>
                        </itemizedlist>
                    </para>
                </formalpara>
            </section>
        </section>

        <section>
            <title>防火墙配置</title>
            <section>
                <title>&OVIRT;&MANAGER;的防火墙配置</title>
                <para>&OVIRT;&MANAGER;使用的网络端口需要在防火墙中允许通过才能正
                    常提供服务。engine-setup执行时会自动配置防火墙，系统已有的防
                    火墙配置会被覆盖。
                </para>
                <para>安装&OVIRT;&MANAGER;之前自行定义的防火墙规则需要手动添加到
                    配置文件中。
                </para>
                <para>下面的防火墙配置表格，适用于使用默认配置安装的情况。如果安
                    装时选择了其他的HTTP或者HTTPS端口，请根据实际情况修改。
                    <table>
                        <title>&OVIRT;&MANAGER;的防火墙配置</title>
                        <tgroup cols="5">
                            <thead><row>
                                    <entry>端口</entry>
                                    <entry>协议</entry>
                                    <entry>来源地址</entry>
                                    <entry>目的地址</entry>
                                    <entry>用途</entry>
                            </row></thead>
                            <tbody>
                                <row>
                                    <entry>-</entry>
                                    <entry>ICMP</entry>
                                    <entry><itemizedlist>
                                            <listitem><simpara>
                                                    &OVIRT;&NODE;
                                            </simpara></listitem>
                                            <listitem><simpara>
                                                    其他独立主机
                                            </simpara></listitem>
                                    </itemizedlist></entry>
                                    <entry><itemizedlist>
                                            <listitem><simpara>
                                                    &OVIRT;&MANAGER;
                                            </simpara></listitem>
                                    </itemizedlist></entry>
                                    <entry><simpara>
                                            &OVIRT;&NODE;向&OVIRT;&MANAGER;注册
                                            时，通过ICMP请求确认&OVIRT;&MANAGER;是否在线。
                                    </simpara></entry>
                                </row>
                                <row>
                                    <entry>22</entry>
                                    <entry>TCP</entry>
                                    <entry><itemizedlist>
                                            <listitem><simpara>
                                                    需要对&OVIRT;&MANAGER;进行
                                                    维护管理的系统
                                            </simpara></listitem>
                                    </itemizedlist></entry>
                                    <entry><itemizedlist>
                                            <listitem><simpara>
                                                    &OVIRT;&MANAGER;
                                            </simpara></listitem>
                                    </itemizedlist></entry>
                                    <entry><simpara>
                                            SSH（可选）
                                    </simpara></entry>
                                </row>
                                <row>
                                    <entry>80, 443</entry>
                                    <entry>TCP</entry>
                                    <entry><itemizedlist>
                                            <listitem><simpara>
                                                    管理门户客户端
                                            </simpara></listitem>
                                            <listitem><simpara>
                                                    普通用户门户客户端
                                            </simpara></listitem>
                                            <listitem><simpara>
                                                    &OVIRT;&NODE;
                                            </simpara></listitem>
                                            <listitem><simpara>
                                                    其他独立主机
                                            </simpara></listitem>
                                            <listitem><simpara>
                                                    REST API客户端
                                            </simpara></listitem>
                                    </itemizedlist></entry>
                                    <entry><itemizedlist>
                                            <listitem><simpara>
                                                    &OVIRT;&MANAGER;
                                            </simpara></listitem>
                                    </itemizedlist></entry>
                                    <entry><simpara>
                                            通过HTTP或者HTTPS访问
                                            &OVIRT;&MANAGER;
                                    </simpara></entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                </para>
                <important>
                    <para>当&OVIRT;&MANAGER;服务器还需要提供NFS服务，如ISO存储
                        域，则还需要在防火墙配置增加一些端口：
                        <itemizedlist>
                            <title>NFSv4</title>
                            <listitem><simpara>
                                    2049端口（TCP）
                            </simpara></listitem>
                        </itemizedlist>
                        <itemizedlist>
                            <title>NFSv3</title>
                            <listitem><simpara>
                                    2049端口（TCP和UDP）
                            </simpara></listitem>
                            <listitem><simpara>
                                    111端口（TCP和UDP，rpcbind/sunrpc服务）
                            </simpara></listitem>
                            <listitem><simpara>
                                通过MOUNTD_PORT指定的端口（TCP和UDP）
                            </simpara></listitem>
                            <listitem><simpara>
                                    通过STATD_PORT指定的端口（TCP和UDP）
                            </simpara></listitem>
                            <listitem><simpara>
                                通过LOCKD_TCPPORT指定的端口（TCP）
                            </simpara></listitem>
                            <listitem><simpara>
                                通过LOCKD_UDPPORT指定的端口（UDP）
                            </simpara></listitem>
                        </itemizedlist>
                        MOUNTD_PORT、STATD_PORT、LOCKD_TCPPORT和LOCKD_UDPPORT在
                        /etc/sysconfig/nfs中配置。
                    </para>
                </important>
            </section>

            <section>
                <title>&OVIRT;&NODE;的防火墙配置</title>
                <para></para>
            </section>

            <section id="sect-Installation_Guide-system-requirements_Section_2-3-3-3">
                <title>目录服务的防火墙配置</title>
                <para></para>
            </section>

            <section>
                <title>数据库的防火墙配置</title>
                <para></para>
            </section>
        </section>
    </section>

</chapter>

